---
import { type CollectionEntry, getCollection } from "astro:content";
import PostPreview from "@/components/blog/PostPreview.astro";
import { getAllPosts } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";
import { collectionDateSort } from "@/utils/date";

export const prerender = true;

// 获取所有作品/文章
const allPosts = await getAllPosts();
const allPostsByDate = allPosts
	.sort(collectionDateSort) as CollectionEntry<"post">[];
---

<PageLayout meta={{ title: "HOME" }}>
	<div class="vibe-container">
		<header class="vibe-header">
			<h1 class="my-name">XU QIU CHENG</h1>
			<p class="my-tagline">New Media Artist / Researcher</p>
		</header>

		<section class="work-archive" aria-label="Project archive">
			<ul class="work-list">
				{
					allPostsByDate.map((p) => (
						<li class="work-item">
							<a href={`/posts/${p.id}/`}>
								<span class="work-date">{p.data.publishDate.getFullYear()}</span>
								<span class="work-title">{p.data.title}</span>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</div>
</PageLayout>

<style>
	/* 这里的样式只针对首页，不会污染全局 */
	.vibe-container {
		margin-top: 15vh;
		max-width: 900px;
		margin-left: auto;
		margin-right: auto;
		padding: 0 2rem;
	}

	.vibe-header {
		margin-bottom: 8rem;
	}

	.my-name {
		font-size: 1rem;
		font-weight: 700;
		letter-spacing: 0.2em;
		margin-bottom: 0.5rem;
	}

	.my-tagline {
		font-size: 0.75rem;
		color: #888;
		letter-spacing: 0.1em;
	}

	.work-list {
		list-style: none;
		padding: 0;
	}

	.work-item {
		border-bottom: 1px solid #eee;
		transition: all 0.4s ease;
	}

	.work-item a {
		display: flex;
		align-items: baseline;
		padding: 2rem 0;
		text-decoration: none;
		color: #000;
	}

	.work-date {
		font-size: 0.7rem;
		width: 80px;
		color: #bbb;
	}

	.work-title {
		font-size: 2rem; /* 这里控制大标题的大小 */
		font-weight: 500;
		line-height: 1.1;
		transition: transform 0.3s ease;
	}

	/* 悬停时的交互：标题右移，变蓝 */
	.work-item:hover {
		border-bottom: 1px solid #0066ff;
	}

	.work-item:hover .work-title {
		transform: translateX(15px);
		color: #0066ff;
	}

	.work-item:hover .work-date {
		color: #0066ff;
	}

	/* 适配手机屏幕 */
	@media (max-width: 640px) {
		.work-title {
			font-size: 1.5rem;
		}
		.vibe-container {
			margin-top: 5vh;
		}
	}
</style>